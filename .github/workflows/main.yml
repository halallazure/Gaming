name: AnyDesk-Gaming-VM
on: workflow_dispatch
jobs:
  build:
    runs-on: windows-latest
    steps:
    - name: Setup AnyDesk & Parsec
      shell: pwsh
      run: |
        $ProgressPreference = 'SilentlyContinue'
        # 1. Download AnyDesk
        curl.exe -L -o anydesk.exe https://download.anydesk.com/AnyDesk.exe
        
        # 2. Install AnyDesk & Set Password
        # Password is set to: Gaming123
        echo "Gaming123" | .\anydesk.exe --set-password
        
        # 3. Get AnyDesk ID (This will show in your GitHub Logs)
        Write-Host "-------------------------------------------"
        $anyid = .\anydesk.exe --get-id
        Write-Host "YOUR ANYDESK ID IS: $anyid"
        Write-Host "-------------------------------------------"
        
        # 4. Install Parsec (Already downloaded for later)
        curl.exe -L -o parsec.exe https://builds.parsec.app/package/parsec-windows.exe
        Start-Process .\parsec.exe -ArgumentList "/silent" -Wait

    - name: Keep Alive (6 Hours)
      run: |
        $i = 0
        while($i -lt 360) {
          Start-Sleep -Seconds 60
          $i++
        }
